<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project Form</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
</head>
<body>
  <nav class="d-flex justify-content-between align-items-center bg-white text-dark py-4 px-4 shadow">
    <div class="d-flex align-items-center justify-content-between">
      <img src="./assets/image/logo.png" alt="Logo" style="height: 40px" />
      <div class="ms-4 d-flex align-items-center gap-4">
        <a href="index.html" class="text-decoration-none text-dark">Home</a>
        <a href="project.html" class="text-decoration-none text-dark">My Project</a>
      </div>
    </div>
    <div class="d-flex items-center">
      <div class="navbar__button">
        <button class="btn btn-warning text-light">
          <a href="contact.html" class="text-decoration-none text-dark">Contact Me</a>
        </button>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card mt-5 border border-0">
          <div class="card-body border border-0">
            <h2 class="mb-4 text-center">ADD MY PROJECT</h2>
            <form id="projectForm" class="d-flex flex-column gap-2">
              <div class="form-group">
                <label for="nameInput">Project Name</label>
                <input
                  type="text"
                  id="nameInput"
                  name="name"
                  class="form-control"
                  required
                />
              </div>
              <div class="form-row d-flex gap-2">
                <div class="form-group col-md-6">
                  <label for="startDateInput">Start Date</label>
                  <input
                    type="date"
                    id="startDateInput"
                    name="startDate"
                    class="form-control"
                    required
                  />
                </div>
                <div class="form-group col-md-6">
                  <label for="endDateInput">End Date</label>
                  <input
                    type="date"
                    id="endDateInput"
                    name="endDate"
                    class="form-control"
                    required
                  />
                </div>
              </div>
              <div class="form-group">
                <label for="descriptionInput">Description</label>
                <textarea
                  id="descriptionInput"
                  name="description"
                  class="form-control"
                  rows="4"
                  required
                ></textarea>
              </div>
              <div class="form-group">
                <label>Technologies</label>
                <div class="form-group d-flex gap-2">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="nodeJs"
                      name="option"
                      value="Node Js"
                    />
                    <label class="form-check-label" for="nodeJs">Node Js</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="reactJs"
                      name="option"
                      value="React Js"
                    />
                    <label class="form-check-label" for="reactJs">React Js</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="nextJs"
                      name="option"
                      value="Next Js"
                    />
                    <label class="form-check-label" for="nextJs">Next Js</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="typescript"
                      name="option"
                      value="TypeScript"
                    />
                    <label class="form-check-label" for="typescript">TypeScript</label>
                  </div>
                </div>
              </div>
              <div class="form-group d-flex flex-column mt-2">
                <label for="imageInput">Upload Image</label>
                <input
                  type="file"
                  id="imageInput"
                  name="image"
                  accept="image/*"
                  class="form-control-file mt-2"
                />
              </div>
              <button
                type="submit"
                class="btn btn-dark btn-block text-light w-100 mt-2"
              >
                Submit
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="cardProject" class="container mt-5">
    <div class="row" id="projectCards"></div>
  </div>

  <!-- Bootstrap JS and dependencies -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.3/js/bootstrap.min.js"></script>
  <!-- Custom JS -->
  <script>
    const projectForm = document.getElementById("projectForm");
    const editIndex = localStorage.getItem("editIndex");
    const dataBlog = JSON.parse(localStorage.getItem("projects")) || [];

    if (editIndex !== null) {
      const blog = dataBlog[editIndex];
      document.getElementById("nameInput").value = blog.title;
      document.getElementById("startDateInput").value = blog.startDate;
      document.getElementById("endDateInput").value = blog.endDate;
      document.getElementById("descriptionInput").value = blog.description;

      document.querySelectorAll('input[name="option"]').forEach((checkbox) => {
        checkbox.checked = blog.options.includes(checkbox.value);
      });

      const imgElement = document.createElement("img");
      imgElement.src = blog.image;
      imgElement.alt = blog.title;
      imgElement.style.width = "100%";
      imgElement.style.height = "auto";
      imgElement.style.objectFit = "cover";
      imgElement.classList.add("mt-2");
      projectForm.appendChild(imgElement);
    }

    projectForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const title = document.getElementById("nameInput").value;
      const startDate = document.getElementById("startDateInput").value;
      const endDate = document.getElementById("endDateInput").value;
      const description = document.getElementById("descriptionInput").value;
      const options = Array.from(document.querySelectorAll('input[name="option"]:checked')).map(
        (checkbox) => checkbox.value
      );
      let image = "";

      if (document.getElementById("imageInput").files.length > 0) {
        const reader = new FileReader();
        reader.onload = function (e) {
          image = e.target.result;
          saveData({ title, startDate, endDate, description, options, image });
        };
        reader.readAsDataURL(document.getElementById("imageInput").files[0]);
      } else if (editIndex !== null) {
        image = dataBlog[editIndex].image;
        saveData({ title, startDate, endDate, description, options, image });
      }
    });

    function saveData(blog) {
      if (editIndex === null) {
        dataBlog.push(blog);
      } else {
        dataBlog[editIndex] = blog;
        localStorage.removeItem("editIndex");
      }
      localStorage.setItem("projects", JSON.stringify(dataBlog));
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
